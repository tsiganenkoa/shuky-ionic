<ion-view title="{{(isInvoice)? 'Invoices':'Estimates';}}" hide-back-button="true" cache-view = "false">
  <ion-nav-buttons side="left">
    <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
  </ion-nav-buttons>
  <ion-nav-buttons side="right">
    <button class="button button-icon button-clear ion-ios-plus-empty" ng-click="add()"></button>
    <button class="button button-icon button-clear ion-ios7-refresh-empty" ng-click="refresh()"></button>
  </ion-nav-buttons>
  <div class="bar bar-subheader bar-stable item-input-inset clients-search-bar" id="search-box">
    <div class="item-input-wrapper">
      <i class="icon ion-ios7-search placeholder-icon"></i>
      <input type="search" placeholder="Search" ng-model="data.searchQuery">
      <i class="clear-search icon ion-ios7-close-empty" ng-click="clearSearch()"></i>
    </div>
  </div>
  <ion-content class="has-subheader page page-invoices-estimates">
    <ion-list>
      <ion-item ng-repeat="i in invoices | filter: data.searchQuery" ng-click="edit(i.Id)">
        <div class="invoice-left-container">
          <h2>{{i.OrganizationName|| i.Email}}</h2>
          <p>#{{i.Id}} {{i.IssueDate}}</p>
        </div>
        <div class="invoice-right-container">
          <h2>{{i.Outstanding}} {{i.Currency}}</h2>
          <p>{{i.PayStatus}}</p>
        </div>
        <ion-option-button class="button-balanced ion-edit ion-option-button custom-font" ng-click="edit(i.Id)"></ion-option-button>
        <ion-option-button class="button-energized ion-close ion-option-button custom-font" ng-click="delete(i.Id)"></ion-option-button>
      </ion-item>
      <div ng-repeat-end></div>
    </ion-list>

    <ion-infinite-scroll on-infinite="loadMoreInvoices()" distance="1%" ng-if="isMoreInvoices"></ion-infinite-scroll>
  </ion-content>
</ion-view>
